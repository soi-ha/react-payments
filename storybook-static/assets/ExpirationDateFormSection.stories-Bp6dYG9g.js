import{j as o}from"./style-1oStNS6c.js";import{r as i}from"./index-CsdIBAqE.js";import{u as R,v as g}from"./validateAndCheckError-Dw9-aDp-.js";import{O as u,b as m,F as V,I as L,L as O,a as b,E as _}from"./FormSection-DWAqeXpQ.js";import{R as p}from"./regex-BHDXXUrE.js";import{P as w}from"./PaymentsFormTitle-aKWCOdka.js";import{P as A}from"./PaymentsInputField-DyH0YpD3.js";const Y=({inputState:r,setInputState:t})=>{p.oneToNine.test(r[0].value)?t(e=>({...e,0:{...e[0],value:"0"+e[0].value,isFilled:!0}})):p.zero.test(r[0].value)?t(e=>({...e,0:{...e[0],value:u.minMonth}})):!p.month.test(r[0].value)&&r[0].value.length&&t(e=>({...e,0:{...e[0],value:u.maxMonth}}))},E=({inputState:r,setErrorMessage:t})=>{new Date(`20${r[1].value}-${r[0].value}-01`)<new Date?(r[0].hasError=!0,r[1].hasError=!0,t(m.expiredCard)):t("")},D=({changeExpiration:r,changeIsValid:t})=>{const{inputState:e,errorMessage:x,setInputState:h,setErrorMessage:l,handleValueChange:M,setFocus:T,setBlur:j,resetErrors:I}=R({inputLength:u.expirationDateInputCount,maxLength:u.expirationDateMaxLength,regex:p.allNumbers,errorText:m.onlyNumber}),[f,P]=i.useState(!0),d=[i.useRef(null),i.useRef(null)],C=(s,a)=>{var n;a.target.value.length===u.expirationDateMaxLength&&d[s].current&&((n=d[s+1].current)==null||n.focus())},N=s=>{s.key==="Enter"&&g({inputState:e,setInputState:h,setErrorMessage:l,changeIsValid:t,stateText:"expirationDate",errorText:m.expiryFormat,elseValidator:()=>E({inputState:e,setErrorMessage:l})})};return i.useEffect(()=>{Y({inputState:e,setInputState:h})},[e[0].hasFocus]),i.useEffect(()=>{r({month:e[0].value,year:e[1].value}),P(Object.values(e).every(s=>!s.hasFocus))},[e]),i.useEffect(()=>{I(),f&&g({inputState:e,setInputState:h,setErrorMessage:l,changeIsValid:t,stateText:"expirationDate",errorText:m.expiryFormat,elseValidator:()=>E({inputState:e,setErrorMessage:l})})},[f]),o.jsxs(V,{children:[o.jsx(w,{title:"카드 유효기간을 입력해 주세요",subTitle:"월/년도(MM/YY)를 순서대로 입력해 주세요."}),o.jsxs(L,{children:[o.jsx(O,{children:"유효기간"}),o.jsx(b,{className:"input-field-container",children:["MM","YY"].map((s,a)=>o.jsx(A,{placeholder:s,maxLength:u.cardNumberMaxLength,value:e[a].value,hasError:e[a].hasError,handleValueChange:n=>{M(n,a),C(a,n)},handleOnFocus:()=>T(a),handleOnBlur:()=>j(a),onEnter:n=>N(n),ref:d[a]},a))}),o.jsx(_,{children:x})]})]})};D.__docgenInfo={description:"",methods:[],displayName:"ExpirationDateFormSection",props:{changeExpiration:{required:!0,tsType:{name:"signature",type:"function",raw:"({ month, year }: ChangeExpirationProps) => void",signature:{arguments:[{type:{name:"ChangeExpirationProps"},name:""}],return:{name:"void"}}},description:""},changeIsValid:{required:!0,tsType:{name:"signature",type:"function",raw:"({ state, isValid }: isValidProps) => void",signature:{arguments:[{type:{name:"isValidProps"},name:""}],return:{name:"void"}}},description:""}}};const K={title:"ExpirationDateFormSection",component:D},c={args:{changeExpiration:()=>{},changeIsValid:()=>{}}};var v,F,y;c.parameters={...c.parameters,docs:{...(v=c.parameters)==null?void 0:v.docs,source:{originalSource:`{
  args: {
    changeExpiration: () => {},
    changeIsValid: () => {}
  }
}`,...(y=(F=c.parameters)==null?void 0:F.docs)==null?void 0:y.source}}};const X=["Default"];export{c as Default,X as __namedExportsOrder,K as default};
